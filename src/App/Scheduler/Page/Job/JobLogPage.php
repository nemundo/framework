<?phpnamespace Nemundo\App\Scheduler\Page\Job;use Nemundo\Admin\Com\Button\AdminIconSiteButton;use Nemundo\Admin\Com\Layout\AdminFlexboxLayout;use Nemundo\Admin\Com\Pagination\AdminPagination;use Nemundo\Admin\Com\Table\AdminTable;use Nemundo\Admin\Com\Table\AdminTableHeader;use Nemundo\App\Scheduler\Com\Form\JobForm;use Nemundo\App\Scheduler\Data\Job\JobPaginationReader;use Nemundo\App\Scheduler\Site\Job\JobCleanSite;use Nemundo\App\Scheduler\Site\Job\JobLogSite;use Nemundo\App\Scheduler\Status\FinishedSchedulerStatus;use Nemundo\App\Scheduler\Template\SchedulerTemplate;use Nemundo\Com\TableBuilder\TableRow;use Nemundo\Core\Time\Second;class JobLogPage extends SchedulerTemplate{    public function getContent()    {        $layout = new AdminFlexboxLayout($this);        $btn = new AdminIconSiteButton($layout);        $btn->site = JobCleanSite::$site;        $jobReader = new JobPaginationReader();        $jobReader->model->loadScript();        $jobReader->model->loadStatus();        $jobReader->addOrder($jobReader->model->finished);        $jobReader->addOrder($jobReader->model->id);        $table = new AdminTable($layout);        $header = new AdminTableHeader($table);        $header->addText($jobReader->model->status->label);        $header->addText($jobReader->model->script->label);        $header->addText($jobReader->model->finished->label);        $header->addText($jobReader->model->finishedDateTime->label);        $header->addText($jobReader->model->duration->label);        foreach ($jobReader->getData() as $jobRow) {            $row = new TableRow($table);            $row->addText($jobRow->status->schedulerStatus);            $row->addText($jobRow->script->scriptClass);            $row->addYesNo($jobRow->finished);            if ($jobRow->finished) {                $row->addText($jobRow->finishedDateTime->getShortDateTimeLeadingZeroFormat());            } else {                $row->addEmpty();            }            if ($jobRow->statusId == (new FinishedSchedulerStatus())->id) {                $row->addText((new Second($jobRow->duration))->getText());            } else {                $row->addEmpty();            }        }        $pagination = new AdminPagination($layout);        $pagination->paginationReader = $jobReader;        $form = new JobForm($layout);        $form->redirectSite = JobLogSite::$site;        return parent::getContent();    }}