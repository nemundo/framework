<?phpnamespace Nemundo\App\UserAction\Com\Form;use Nemundo\Admin\Com\Form\AbstractAdminForm;use Nemundo\Admin\Com\ListBox\AdminPasswordBox;use Nemundo\Core\Debug\Debug;use Nemundo\Html\Formatting\Bold;use Nemundo\Core\Language\LanguageCode;use Nemundo\Html\Paragraph\Paragraph;use Nemundo\Package\Bootstrap\FormElement\BootstrapPasswordTextBox;use Nemundo\User\Builder\UserBuilder;use Nemundo\User\Data\User\UserReader;use Nemundo\User\Login\SecureTokenLogin;use Nemundo\User\Login\UserLogin;use Nemundo\User\Password\PasswordChange;class UserActivationForm extends AbstractAdminForm{    /**     * @var BootstrapPasswordTextBox     */    private $password;    public function getContent()    {        $userId = (new SecureTokenLogin())->getUserIdFromSecureTokenParameter();        if ($userId !==null) {        $userRow = (new UserReader())->getRowById($userId);        $bold = new Bold($this);        $bold->content = $userRow->login;        $this->password = new AdminPasswordBox($this);        $this->password->label[LanguageCode::EN] = 'What password do you want?';        $this->password->label[LanguageCode::DE] = 'GewÃ¼nschtes Passwort';        $this->password->validation = true;        } else {            $p = new Paragraph($this);            $p->content = 'User does not exist.';        }        return parent::getContent();    }    protected function onSubmit()    {        $passwordNew = $this->password->getValue();        $userId = (new SecureTokenLogin())->getUserIdFromSecureTokenParameter();        $userRow = (new UserReader())->getRowById($userId);        (new PasswordChange($userId))->changePassword($passwordNew);       /* $user = (new UserBuilder())->fromSecureTokenParameter();  // (new UserItemType())->fromSecureTokenParameter();        $user->changePassword($password);        $user->enableUser();*/        $login = new UserLogin();        $login->login = $userRow->login;        $login->password = $passwordNew;        $login->saveCookiePassword = true;        $login->loginUser();    }}