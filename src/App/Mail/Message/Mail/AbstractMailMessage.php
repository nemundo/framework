<?phpnamespace Nemundo\App\Mail\Message\Mail;use Nemundo\App\Mail\Data\InlineImage\InlineImage;use Nemundo\App\Mail\Data\MailQueue\MailQueue;use Nemundo\App\Mail\Message\Base\AbstractMessage;use Nemundo\Core\Log\LogMessage;use Nemundo\Core\Validation\EmailValidation;abstract class AbstractMailMessage extends AbstractMessage{    /**     * @var string     */    protected $mailTo;    /**     * @var string     */    protected $subject;    /**     * @var string     */    protected $text;    public function __construct()    {        $this->loadMailMessage();    }    protected function loadMailMessage()    {    }    public function sendMail()    {        if ((new EmailValidation())->isEmail($this->mailTo)) {            $data = new MailQueue();            $data->mailTo = $this->mailTo;            $data->subject = $this->subject;            $data->text = $this->text;            $data->send = false;            $mailQueueId = $data->save();            foreach ($this->inlineImageList as $inlineImage) {                $data = new InlineImage();                $data->mailQueueId = $mailQueueId;                $data->cid = $inlineImage->cid;                $data->filename = $inlineImage->filename;                $data->save();            }        } else {            (new LogMessage())->writeError('MailMessage: No valid eMail ' . $this->mailTo);        }    }}